<!DOCTYPE html>
<html>
<head>
	<title>CodeStory - HomePage</title>
	<link rel="shortcut icon" type="image/png" href="fusee-16x16.png"/>
	<link type="text/css" rel="stylesheet" href="style.less"/>
</head>
<body>
<h1 id="project-name">CodeStory</h1>

<div id="header"></div>

<div id="commits">
	<script type="text/x-template" id="commit-template">
		{{#commit}}
		<div class="commit">
			<img src="{{gravatarUrl}}"/>

			<div class="date">{{date}}</div>
			<div class="message">{{message}}</div>
		</div>
		{{/commit}}
	</script>
</div>

</body>

<script src="mustache.js">
</script>
<script src="jquery.js">
</script>
<script>
	$.getJSON('commits', function (json) {
		$("#commits").html(Mustache.to_html($('#commit-template').html(), {commit:json}));
	})
</script>
<script>
	$(function () {
		var previousScrollTop, currentScrollTop, yPosition = 0;
		$(window).scroll(function (e) {
			currentScrollTop = $(window).scrollTop();
			var diff = previousScrollTop - currentScrollTop;
			if (isNaN(diff)) {
				diff = 0;
			}
			yPosition = yPosition + diff;
			previousScrollTop = currentScrollTop;
			$('body').css('background-position', '0 ' + yPosition + 'px, ' + //
					'0 ' + yPosition * 2 + 'px, ' + //
					'0 ' + yPosition * 5 + 'px, ' + //
					'0 0');
		});
	});
</script>
</html>
